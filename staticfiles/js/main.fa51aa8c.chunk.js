(this["webpackJsonpluxureally-frontend"]=this["webpackJsonpluxureally-frontend"]||[]).push([[0],{229:function(e,t,a){e.exports=a(355)},242:function(e,t,a){},260:function(e,t,a){},261:function(e,t,a){},262:function(e,t,a){},264:function(e,t,a){},351:function(e,t,a){},352:function(e,t,a){},355:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),l=a.n(c),o=a(73),i=a(67),u=a(19),s=a(68),d=a(196),m=a.n(d),f=(a(242),a(198)),E=a.n(f).a.create({headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/x-www-form-urlencoded"},xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"}),p=function(e){return{type:"REQUEST_FAIL",error:e}},b=Object(u.b)((function(e){return{restaurantId:e.food.restaurantId,tableId:e.food.tableId}}),(function(e){return{onInitializeData:function(t,a){return e(function(e,t){return{type:"INITIALIZE_RESTAURANT_TABLE_IDS",payload:{restaurantId:e,tableId:t}}}(t,a))},onFetchFood:function(t){return e(function(e){return function(t){t({type:"REQUEST_START"}),E.get("/luxureally/api/foods/"+e).then((function(e){var a=e.data;t(function(e){return{type:"FETCH_FOOD_SUCCESS",data:e}}(a))})).catch((function(e){t(p(e))}))}}(t))}}}))((function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],l=a[1],o={width:"50%",marginLeft:"25%",marginTop:"60%"};Object(n.useRef)(window.matchMedia("(max-width: 800px)")).current.matches||(o={width:"40%",marginLeft:"30%",marginTop:"5%"});return r.a.createElement("div",{onClick:e.closeQRScanner,className:"Scanner",style:{display:e.display}},c?r.a.createElement("div",{className:"Error"},c.message):null,r.a.createElement(m.a,{delay:300,onError:function(e){l(e)},onScan:function(t){if(null!==t){var a=t.split(" ");e.onInitializeData(a[0],a[1]),e.onFetchFood(a[0]),e.closeQRScanner()}},style:Object(s.a)({},o,{height:"100%"})}))})),h=(a(260),Object(u.b)((function(e){return{totalQuantity:e.cart.totalQuantity}}))((function(e){return r.a.createElement("div",{className:"CartItem",onClick:function(){e.history.push("/checkout")}},r.a.createElement("div",{className:"icon",style:{color:"white",fontSize:"40px"}},r.a.createElement("i",{className:"flaticon-cutlery"})),r.a.createElement("div",{className:"items-count"},e.totalQuantity))}))),v=(a(261),Object(u.b)(null,(function(e){return{onRemoveItems:function(){return e({type:"REMOVE_ITEMS"})}}}))((function(e){return r.a.createElement("div",{className:"RemoveItem",onClick:function(){e.onRemoveItems()}},r.a.createElement("div",{style:{color:"white",fontSize:"12px"}},"Remove Items"))}))),y=(a(262),function(e){return r.a.createElement("a",{href:"/order-status"},r.a.createElement("div",{className:"Order"},r.a.createElement("div",{style:{color:"white",fontSize:"12px"}},"Orders")))}),g=function(e){return r.a.createElement("aside",{id:"colorlib-hero"},r.a.createElement("div",{className:"flexslider"},r.a.createElement("ul",{className:"slides"},r.a.createElement("li",{style:{backgroundImage:"url(images/img_bg_1.jpg)"}},r.a.createElement("div",{className:"overlay"}),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 col-sm-12 col-xs-12 col-md-offset-3 slider-text"},r.a.createElement("div",{className:"slider-text-inner text-center"},r.a.createElement("div",{className:"desc"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"flaticon-cutlery"})),r.a.createElement("h1",null,"Special & Fresh Food"),r.a.createElement("p",null,"Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts."),r.a.createElement("p",null,r.a.createElement("button",{href:"#",className:"btn btn-primary btn-lg btn-learn",onClick:function(){return e.openQRScanner()}},"Scan QR Code")),r.a.createElement("div",{className:"desc2"}))))))))))},S=a(65),N=function(e){return r.a.createElement("header",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"colorlib-navbar-brand"},r.a.createElement(S.b,{className:"colorlib-logo",to:"/"},r.a.createElement("i",{className:"flaticon-cutlery"}),r.a.createElement("span",null,"Lu"),r.a.createElement("span",null,"to")))))))},T=Object(u.b)((function(e){return{categories:e.food.categoriesDetails,loading:e.food.loading,error:e.food.error}}),(function(e){return{onAddItem:function(t){return e(function(e){return{type:"ADD_ITEM_TO_CART",item:e}}(t))}}}))((function(e){var t=Object(n.useState)(0),a=Object(i.a)(t,2),c=a[0],l=a[1];return r.a.createElement("div",{className:"colorlib-menu"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"colorlib-menu-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 col-md-offset-3 text-center intro-heading"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"flaticon-cutlery"})),r.a.createElement("h2",null,"Restaurant"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("ul",{className:"nav nav-tabs text-center",role:"tablist"},0!==e.categories.length?e.categories.map((function(e,t){return r.a.createElement("li",{key:e.id,role:"presentation",className:t===c?"active":""},r.a.createElement("a",{href:"#"+e.id,"aria-controls":"mains",role:"tab","data-toggle":"tab",onClick:function(e){return function(e){l(e)}(e)}},e.title))})):null))),r.a.createElement("div",{className:"tab-content"},0!==e.categories.length?e.categories.map((function(t,a){return r.a.createElement("div",{role:"tabpanel",className:"tab-pane "+(c===a?"active":""),id:t.id,key:t.id},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("ul",{className:"menu-dish"},t.foods.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement("figure",{className:"dish-entry"},r.a.createElement("div",{className:"dish-img",style:{backgroundImage:"url(http://localhost:8000"+t.picture+")"}})),r.a.createElement("div",{className:"text"},r.a.createElement("span",{className:"price"},t.price,"DHS"),r.a.createElement("h3",null,t.title),r.a.createElement("p",{className:"cat"},t.description),r.a.createElement("span",{className:"btn btn-primary btn-lg btn-learn",onClick:function(){return e.onAddItem(t)}},"+")))}))))))})):null)),r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("p",null,r.a.createElement("a",{href:"/checkout",className:"btn btn-primary btn-outline btn-md"},"Checkout")))))))})),I=Object(u.b)((function(e){return{categories:e.food.categories,qrCodeScanned:e.food.qrCodeScanned}}))((function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],l=a[1],o=function(){l(!0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{display:c?"block":"none",closeQRScanner:function(){l(!1)},openQRScanner:o}),r.a.createElement(y,{history:e.history}),r.a.createElement(h,{history:e.history}),r.a.createElement(v,null),r.a.createElement("div",{id:"colorlib-page"},r.a.createElement(N,{openQRScanner:o}),r.a.createElement(g,{openQRScanner:o}),r.a.createElement("div",{className:"goto-here"}),e.qrCodeScanned?r.a.createElement(T,null):r.a.createElement("div",{className:"colorlib-menu"},r.a.createElement("div",{className:"container col-md-12 text-center"},r.a.createElement("button",{className:"btn btn-primary btn-lg btn-learn",onClick:function(){return o()}},"Scan QR Code to view menu")))))})),O=(a(264),{selection:!0}),R={pagination:{labelDisplayedRows:"{from}-{to} sur {count}",labelRowsSelect:"lignes",labelRowsPerPage:"Lignes par page",firstAriaLabel:"Premi\xe8re Page",firstTooltip:"Premi\xe8re Page",previousAriaLabel:"Page pr\xe9c\xe9dente",previousTooltip:"Page pr\xe9c\xe9dente",nextAriaLabel:"Page suivante",nextTooltip:"Page suivante",lastAriaLabel:"Derni\xe8re Page",lastTooltip:"Derni\xe8re Page"},toolbar:{nRowsSelected:"{0} ligne(s) s\xe9lectionn\xe9e(s)",addRemoveColumns:"Ajouter ou Supprimer des colonnes",showColumnsTitle:"Afficher les colonnes",showColumnsAriaLabel:"Afficher les colonnes",exportTitle:"Exporter",exportAriaLabel:"Exporter",exportName:"Exporter sous forme CSV",searchTooltip:"Rechercher",searchPlaceholder:"Rechercher"},header:{actions:"Actions"},body:{emptyDataSourceMessage:"Aucun r\xe9sultat \xe0 afficher",filterRow:{filterTooltip:"Filtrer"},addTooltip:"Ajouter",deleteTooltip:"Supprimer",editTooltip:"Modifier",editRow:{deleteText:"\xcates vous s\xfbr de vouloir supprimer cette ligne ?",cancelTooltip:"Annuler",saveTooltip:"Enregistrer"},grouping:{placeholder:"D\xe9placez les ent\xeates pour faire un group by"}}},x=a(200),C=a.n(x),_=(a(351),function(e){return r.a.createElement("div",{class:"lds-hourglass"})}),A=Object(o.f)(Object(u.b)((function(e){return{cartItems:e.cart.cartItems,totalQuantity:e.cart.totalQuantity,totalPrice:e.cart.totalPrice,tableId:e.food.tableId,loading:e.food.loading}}),(function(e){return{updateItems:function(t){return e(function(e){return{type:"UPDATE_CART_ITEMS",items:e}}(t))},onOrderPost:function(t){return e(function(e){return function(t){t({type:"REQUEST_START"}),E.post("/luxureally/api/place-order/",e).then((function(e){var a=e.data;t(function(e){return{type:"POST_ORDER_SUCCESS",data:e}}(a))})).catch((function(e){t(p(e))}))}}(t))}}}))((function(e){var t=e.cartItems,a=e.updateItems,c=e.totalPrice,l=e.totalQuantity,o=e.tableId,u=e.onOrderPost,s=e.loading,d=Object(n.useState)(""),m=Object(i.a)(d,2),f=m[0],E=m[1];return r.a.createElement("div",{className:"Checkout"},r.a.createElement("div",{className:"col-md-8 text-center textarea"},r.a.createElement("textarea",{value:f,onChange:function(e){E(e.target.value)},placeholder:"Order details"})),r.a.createElement("div",{className:"col-md-8"},s?r.a.createElement(_,null):r.a.createElement(C.a,{title:"Checkout",columns:[{title:"Title",field:"title",editable:"never"},{title:"Price",field:"price",editable:"never"},{title:"Quantity",field:"quantity"}],data:t.map((function(e){return{title:e.title,price:e.price,quantity:e.quantity}})),options:O,editable:{onRowUpdate:function(e,n){return function(e,n){return new Promise((function(n,r){setTimeout((function(){var r=JSON.parse(JSON.stringify(t)),c=r.findIndex((function(t){return t.title===e.title}));r[c].quantity=parseInt(e.quantity),a(r),n()}),1e3)}))}(e)},onRowDelete:function(e){return function(e){return new Promise((function(n,r){setTimeout((function(){var r=JSON.parse(JSON.stringify(t)),c=r.findIndex((function(t){return t.title===e.title}));r.splice(c,1),console.log(r),a(r),n()}),1e3)}))}(e)}},localization:R})),r.a.createElement("div",{className:"col-md-3 text-center summary"},"Total Price: ",c," DHS Total Meals: ",l),r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("p",null,r.a.createElement("button",{className:"btn btn-primary btn-outline btn-md",onClick:function(){var a=function(e,t){for(var a=new FormData,n=0;n<t.length;n++)a.append(e[n],t[n]);return a}(["table","total_price","details","notes"],[o,c,[t.map((function(e){return[e.id,e.quantity]}))],f]);u(a),e.history.push("/order-status")}},"Place Order"))))}))),j=a(205),w=a(206),D=a(211),k=a(207),P=a(212),Q=(a(352),function(e){function t(){return Object(j.a)(this,t),Object(D.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(P.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.orders;console.log(t),this.interval=setInterval((function(){for(var a=0;a<t.length;a++)e.props.checkOrdersStatus(t[a].id)}),6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.orders,a=e.onCancel;return r.a.createElement("div",{className:"Status"},r.a.createElement("table",{border:"1"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,0!==t.length?t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.status),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return a(e.id)},className:"btn btn-outline btn-primary btn-md"},"Cancel")))})):r.a.createElement("td",{colspan:"4"},"You haven't ordered a meal yet. Go back to ",r.a.createElement(S.b,{to:"/"},"Home Page")," "))))}}]),t}(n.Component)),L=Object(u.b)((function(e){return{orders:e.food.orders,restaurantId:e.food.restaurantId,tableId:e.food.tableId}}),(function(e){return{checkOrdersStatus:function(t){return e(function(e){return function(t){t({type:"REQUEST_START"}),E.get("/luxureally/api/check-status/"+e).then((function(e){var a=e.data;t(function(e){return{type:"GET_ORDERS_STATUS",data:e}}(a))})).catch((function(e){t(p(e))}))}}(t))},onCancel:function(t){return e(function(e){return function(t){E.delete("/cancel-order/"+e).then((function(e){var a=e.data;console.log(a),t(function(e){return{type:"DELETE_ORDER",orderId:e}}(a.id))})).catch((function(e){}))}}(t))},onDeleteAll:function(){return e({type:"REMOVE_ALL_ORDERS"})}}}))(Q),U=function(e){return r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/",exact:!0,component:I}),r.a.createElement(o.a,{path:"/checkout",component:A}),r.a.createElement(o.a,{path:"/order-status",component:L}))},F=function(e){return r.a.createElement(U,null)},q=a(23),M=a(93),z=function(e,t){return Object(s.a)({},e,{},t)},H={restaurantId:void 0,tableId:void 0,categoriesDetails:[],loading:!1,error:null,qrCodeScanned:!1,orders:[]},J=function(e,t){return z(e,{restaurantId:t.payload.restaurantId,tableId:t.payload.tableId})},V=function(e,t){return z(e,{loading:!0})},B=function(e,t){return z(e,{categoriesDetails:t.data.infos,loading:!1,error:null,qrCodeScanned:!0})},G=function(e,t){var a=Object(M.a)(e.orders);return a.push(t.data),z(e,{loading:!1,error:null,orders:a})},Z=function(e,t){var a=Object(M.a)(e.orders),n=a.findIndex((function(e){return e.id===t.data.id}));return a[n].status=t.data.status,z(e,{loading:!1,error:null,orders:a})},W=function(e,t){return z(e,{loading:!1,error:t.error.message})},X=function(e,t){var a=Object(M.a)(e.orders),n=a.findIndex((function(e){return e.id===t.orderId}));return-1!==n&&a.splice(n,1),z(e,{orders:a})},Y=function(e,t){return z(e,{orders:[]})},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZE_RESTAURANT_TABLE_IDS":return J(e,t);case"REQUEST_START":return V(e);case"FETCH_FOOD_SUCCESS":return B(e,t);case"GET_ORDERS_STATUS":return Z(e,t);case"POST_ORDER_SUCCESS":return G(e,t);case"REQUEST_FAIL":return W(e,t);case"DELETE_ORDER":return X(e,t);case"REMOVE_ALL_ORDERS":return Y(e);default:return e}},$={cartItems:[],totalQuantity:0,totalPrice:0},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ITEM_TO_CART":console.log(t.item);var a=Object(M.a)(e.cartItems),n=a.findIndex((function(e){return e.id===t.item.id}));return-1!==n?a[n].quantity++:a.push(Object(s.a)({},t.item,{quantity:1})),console.log(e.cartItems),Object(s.a)({},e,{cartItems:a,totalQuantity:e.totalQuantity+1,totalPrice:a.reduce((function(e,t){return e+t.price*t.quantity}),0)});case"UPDATE_CART_ITEMS":return Object(s.a)({},e,{cartItems:t.items,totalQuantity:t.items.reduce((function(e,t){return e+t.quantity}),0),totalPrice:t.items.reduce((function(e,t){return e+t.price*t.quantity}),0)});case"REMOVE_ITEMS":return $;default:return e}},te=a(208),ae=a(151),ne=a(209),re=a.n(ne),ce=a(210),le=Object(q.c)({food:K,cart:ee}),oe={key:"root",storage:re.a},ie=Object(ae.a)(oe,le),ue=Object(q.e)(ie,Object(q.d)(Object(q.a)(te.a))),se=Object(ae.b)(ue);l.a.render(r.a.createElement(u.a,{store:ue},r.a.createElement(ce.a,{loading:null,persistor:se},r.a.createElement(S.a,null,r.a.createElement(F,null)))),document.getElementById("root"))}},[[229,1,2]]]);
//# sourceMappingURL=main.fa51aa8c.chunk.js.map